<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KGL Director Dashboard</title>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="../css/directorDashboard.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="logo">
        <img src="../images/logo.png" alt="KGL Logo" />
        <button class="toggle-btn" id="toggleBtn">
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>

      <nav>
        <a href="#" onclick="showDashboard(event)" class="active"
          ><i class="fa-solid fa-chart-pie"></i><span> Dashboard</span></a
        >
        <a href="#" onclick="loadPage(event, 'salesOverviewDirector.html')"
          ><i class="fa-solid fa-coins"></i><span> Sales Overview</span></a
        >
        <a href="#" onclick="loadPage(event, 'stockOverviewDirector.html')"
          ><i class="fa-solid fa-warehouse"></i><span> Stock Overview</span></a
        >
        <a href="#" onclick="loadPage(event, 'creditSalesOverviewDirector.html')"
          ><i class="fa-solid fa-credit-card"></i
          ><span> Credit Overview</span></a
        >
        <a href="#" onclick="loadPage(event, 'adminstration.html')">
          <i class="fa-solid fa-user-gear"></i>
          <span> Administration</span>
        </a>

        <a href="#" onclick="logout()"
          ><i class="fa-solid fa-right-from-bracket"></i><span> Logout</span></a
        >
      </nav>
    </aside>

    <!-- Main -->
    <main class="main">
      <div id="dashboard-content">
      <!-- Top Bar -->
      <header class="topbar">
        <h3>Welcome, Director</h3>
        <span id="loggedInUser"><i class="fa-solid fa-user-tie"></i> Director</span>
      </header>

      <!-- Summary Cards -->
      <section class="cards">
        <div class="card">
          <i class="fa-solid fa-scale-balanced"></i>
          <h4>Total Stock</h4>
          <p id="totalStock">--</p>
        </div>

        <div class="card">
          <i class="fa-solid fa-coins"></i>
          <h4>Total Sales</h4>
          <p id="totalSales">--</p>
        </div>

        <div class="card">
          <i class="fa-solid fa-clock"></i>
          <h4>Credit Outstanding</h4>
          <p id="creditOutstanding">--</p>
        </div>

        <div class="card">
          <i class="fa-solid fa-store"></i>
          <h4>Active Branches</h4>
          <p id="activeBranches">--</p>
        </div>
      </section>

      <!-- Charts -->
      <section class="charts">
        <div class="chart-box">
          <h4>Sales by Branch (UGX)</h4>
          <canvas id="branchSalesChart"></canvas>
        </div>

        <div class="chart-box">
          <h4>Stock Distribution (KG)</h4>
          <canvas id="stockDistributionChart"></canvas>
        </div>
      </section>
      </div>

      <!-- Iframe for other pages -->
      <iframe id="content-frame" style="display: none; width: 100%; height: 100vh; border: none;"></iframe>
    </main>
    <script src="../js/directorDashboard.js"></script>
    <script>
      function showDashboard(e) {
        if(e) e.preventDefault();
        document.getElementById('dashboard-content').style.display = 'block';
        document.getElementById('content-frame').style.display = 'none';
        updateActiveLink(e.currentTarget);
      }

      function loadPage(e, url) {
        if(e) e.preventDefault();
        document.getElementById('dashboard-content').style.display = 'none';
        const frame = document.getElementById('content-frame');
        frame.style.display = 'block';
        frame.src = url;
        updateActiveLink(e.currentTarget);
      }

      function updateActiveLink(element) {
        document.querySelectorAll('.sidebar nav a').forEach(link => link.classList.remove('active'));
        element.classList.add('active');
      }

      function logout() {
        localStorage.clear();
        window.location.href = 'login.html';
      }
    </script>
  </body>
</html>
