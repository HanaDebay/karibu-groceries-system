<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KGL Manager Dashboard</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <!-- Responsive Utilities CSS -->
    <!-- <link rel="stylesheet" href="../css/responsive-utilities.css" /> -->

    <!-- CSS -->
    <link rel="stylesheet" href="../css/managerDashboard.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="logo">
            <img src="../images/logo.png" alt="KGL Logo" />

            <!-- Toggle Button NOW in sidebar -->
            <button class="toggle-btn" id="toggleBtn">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>

        <nav>
            <a href="#" onclick="showDashboard(event)" class="active"><i class="fa-solid fa-chart-line"></i><span> Dashboard</span></a>
            <a href="#" onclick="loadPage(event, 'recordProcurment.html')"><i class="fa-solid fa-box"></i><span> Procure Produce</span></a>
            <a href="#" onclick="loadPage(event, 'stockManagement.html')"><i class="fa-solid fa-warehouse"></i><span> Stock Management</span></a>
            <a href="#" onclick="loadPage(event, 'salesReportManager.html')"><i class="fa-solid fa-credit-card"></i><span> Sales Report</span></a>
            <a href="#" onclick="loadPage(event, 'recordSaleManager.html')"><i class="fa-solid fa-cart-shopping"></i><span> Record Sales</span></a>
            <a href="#"><i class="fa-solid fa-gear"></i><span> Settings</span></a> <!-- Assuming settings is a future feature or modal -->
            <a href="#" onclick="logout()"><i class="fa-solid fa-right-from-bracket"></i><span> Logout</span></a>
        </nav>
    </aside>


    <!-- Main Content -->
    <main class="main" id="main">

        <div id="dashboard-content">
        <!-- Top Bar -->
        <header class="topbar">
            <h3 id="welcome-msg">Welcome, Branch Manager</h3>
            <span id="branch-info"><i class="fa-solid fa-location-dot"></i> Matugga Branch</span>
        </header>

        <!-- Summary Cards -->
        <section class="cards">
            <div class="card">
                <i class="fa-solid fa-seedling"></i>
                <h4>Produce Types</h4>
                <p>5</p>
            </div>

            <div class="card">
                <i class="fa-solid fa-scale-balanced"></i>
                <h4>Total Stock</h4>
                <p>18,500 KG</p>
            </div>

            <div class="card">
                <i class="fa-solid fa-coins"></i>
                <h4>Todayâ€™s Sales</h4>
                <p>UGX 4,200,000</p>
            </div>

            <div class="card">
                <i class="fa-solid fa-clock"></i>
                <h4>Credit Due</h4>
                <p>UGX 1,800,000</p>
            </div>
        </section>

        <!-- Charts -->
        <section class="charts">
            <div class="chart-box">
                <h4>Stock Levels (KG)</h4>
                <canvas id="stockChart"></canvas>
            </div>

            <div class="chart-box">
                <h4>Weekly Sales (UGX)</h4>
                <canvas id="salesChart"></canvas>
            </div>
        </section>
        </div>

        <!-- Iframe for other pages -->
        <iframe id="content-frame" style="display: none; width: 100%; height: 100vh; border: none;"></iframe>
    </main>

    <!-- JS -->
    <!-- <script src="../js/responsive-utils.js"></script> -->
    <script src="../js/managerDashboard.js"></script>
    <script>
      function showDashboard(e) {
        if(e) e.preventDefault();
        document.getElementById('dashboard-content').style.display = 'block';
        document.getElementById('content-frame').style.display = 'none';
        updateActiveLink(e.currentTarget);
      }

      function loadPage(e, url) {
        if(e) e.preventDefault();
        document.getElementById('dashboard-content').style.display = 'none';
        const frame = document.getElementById('content-frame');
        frame.style.display = 'block';
        frame.src = url;
        updateActiveLink(e.currentTarget);
      }

      function updateActiveLink(element) {
        document.querySelectorAll('.sidebar nav a').forEach(link => link.classList.remove('active'));
        element.classList.add('active');
      }

      function logout() {
        localStorage.clear();
        window.location.href = 'login.html';
      }
    </script>
</body>

</html>