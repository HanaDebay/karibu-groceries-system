<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Record Sale - KGL Manager</title>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- Responsive Utilities CSS -->
    <link rel="stylesheet" href="../css/responsive-utilities.css" />

    <!-- CSS -->
    <link rel="stylesheet" href="../css/recordSaleManager.css" />
    <style>
      /* Additional styles for read-only fields and toast */
      input[readonly] {
        background-color: #ecf0f1;
        color: #7f8c8d;
        cursor: not-allowed;
      }
      .toast {
        visibility: hidden;
        min-width: 250px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 4px;
        padding: 16px;
        position: fixed;
        z-index: 1100;
        right: 20px;
        top: 20px;
      }
      .toast.show {
        visibility: visible;
        animation:
          fadein 0.5s,
          fadeout 0.5s 2.5s;
      }
      .toast.error {
        background-color: #e74c3c;
      }
      .toast.success {
        background-color: #2ecc71;
      }
      @keyframes fadein {
        from {
          top: 0;
          opacity: 0;
        }
        to {
          top: 20px;
          opacity: 1;
        }
      }
      @keyframes fadeout {
        from {
          top: 20px;
          opacity: 1;
        }
        to {
          top: 0;
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <!-- Top Bar -->
    <header class="topbar">
      <h3>Record Sale</h3>
      <span id="branchDisplay"
        ><i class="fa-solid fa-location-dot"></i> Branch</span
      >
    </header>

    <!-- Sale Type Toggle -->
    <section class="sale-type-toggle">
      <button class="active" onclick="showTab('cashSale')" id="btn-cashSale">
        <i class="fa-solid fa-money-bill"></i> Cash Sale
      </button>
      <button onclick="showTab('creditSale')" id="btn-creditSale">
        <i class="fa-solid fa-credit-card"></i> Credit Sale
      </button>
    </section>

    <!-- Form Container -->
    <main class="form-container">
      <!-- Cash Sale Form -->
      <div id="cashSale" class="tab-content">
        <form id="cashSaleForm" class="sale-form" novalidate>
          <h4>Cash Sale</h4>

          <div class="form-group">
            <label>Produce Name</label>
            <select name="produceName" class="produce-select" required>
              <option value="">Select Produce</option>
              <!-- Populated by JS -->
            </select>
          </div>

          <div class="form-group">
            <label>Tonnage (KG)</label>
            <input
              type="number"
              name="tonnage"
              placeholder="e.g 50"
              min="1"
              required
            />
          </div>

          <div class="form-group">
            <label>Amount Paid (UGX)</label>
            <input
              type="number"
              name="amountPaid"
              placeholder="Auto-calculated or enter amount"
              min="1"
              required
            />
          </div>

          <div class="form-group">
            <label>Buyer's Name</label>
            <input
              type="text"
              name="buyerName"
              placeholder="Customer Name"
              required
            />
          </div>

          <div class="form-group">
            <label>Recorded By</label>
            <input type="text" name="salesAgent" class="agent-name" readonly />
          </div>

          <div class="form-group">
            <label>Date</label>
            <input type="date" name="date" required />
          </div>

          <button type="submit" class="submit-btn">Record Cash Sale</button>
        </form>
      </div>

      <!-- Credit Sale Form -->
      <div id="creditSale" class="tab-content" style="display: none">
        <form id="creditSaleForm" class="sale-form" novalidate>
          <h4>Credit Sale</h4>

          <div class="form-group">
            <label>Buyer's Name</label>
            <input type="text" name="buyerName" required />
          </div>

          <div class="form-group">
            <label>National ID (NIN)</label>
            <input
              type="text"
              name="nationalId"
              placeholder="e.g CM1234..."
              required
            />
          </div>

          <div class="form-group">
            <label>Location</label>
            <input type="text" name="location" required />
          </div>

          <div class="form-group">
            <label>Contacts</label>
            <input type="tel" name="contact" placeholder="07..." required />
          </div>

          <div class="form-group">
            <label>Produce Name</label>
            <select name="produceName" class="produce-select" required>
              <option value="">Select Produce</option>
            </select>
          </div>

          <div class="form-group">
            <label>Produce Type</label>
            <input
              type="text"
              name="produceType"
              placeholder="Auto-filled"
              readonly
            />
          </div>

          <div class="form-group">
            <label>Tonnage (KG)</label>
            <input type="number" name="tonnage" min="1" required />
          </div>

          <div class="form-group">
            <label>Amount Due (UGX)</label>
            <input type="number" name="amountDue" min="1" required />
          </div>

          <div class="form-group">
            <label>Recorded By</label>
            <input type="text" name="salesAgent" class="agent-name" readonly />
          </div>

          
          <div class="form-group">
            <label>Dispatch Date</label>
            <input type="date" name="dispatchDate" required />
          </div>
          
          <div class="form-group">
            <label>Due Date</label>
            <input type="date" name="dueDate" required />
          </div>


          <button type="submit" class="submit-btn">Record Credit Sale</button>
        </form>
      </div>
    </main>
    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>
    <!-- JS -->
    <script src="../js/responsive-utils.js"></script>
    <script src="../js/recordSaleManager.js"></script>
  </body>
</html>
